<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>DOMETVIE Lyon Sud Ouest ‚Äî Adaptation du domicile pour seniors</title>
  <meta name="description" content="Adaptation du domicile pour seniors et personnes √† mobilit√© r√©duite : douches s√©curis√©es, monte-escaliers, √©l√©vateurs privatifs, domotique. Devis gratuit." />
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
  <style>
    body { font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    .btn-pop{transition:transform .2s ease, box-shadow .2s ease;}
    .btn-pop:hover{transform:translateY(-2px); box-shadow:0 12px 30px rgba(226,0,122,.25);}    
  </style>

  <!-- Meta Pixel (Facebook) -->
  <script>
    !function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;t.src='https://connect.facebook.net/en_US/fbevents.js';
    s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window, document,'script');
    fbq('init', '61574020980933');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none" src="https://www.facebook.com/tr?id=61574020980933&ev=PageView&noscript=1"/></noscript>
</head>
<body class="bg-gray-50 text-gray-800">
  <div class="w-full text-center text-sm bg-[#E2007A] text-white py-2 px-4">Devis gratuit ‚Ä¢ R√©ponse sous 24h ‚Ä¢ Entreprise accompagnante MaPrimeAdapt‚Äô</div>

  <!-- HEADER -->
  <header class="bg-white shadow-sm">
    <div class="container mx-auto px-4 py-4 flex items-center justify-between">
      <h1 class="text-xl font-extrabold text-[#E2007A]">DOMETVIE Lyon Sud Ouest</h1>
      <a href="#form" class="text-sm bg-[#E2007A] text-white py-2 px-4 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition transform btn-pop">Demander un devis gratuit</a>
    </div>
  </header>

  <!-- HERO simple, photo + texte -->
  <section class="container mx-auto px-4 py-12 grid md:grid-cols-2 gap-10 items-start">
    <!-- COLONNE TEXTE -->
    <div>
      <h2 class="text-3xl md:text-4xl font-extrabold text-gray-900 leading-tight mb-4">Sp√©cialistes de l‚Äôadaptation du domicile pour seniors et personnes √† mobilit√© r√©duite : douche s√©curis√©e, monte-escalier, √©l√©vateur privatif‚Ä¶</h2>
      <p class="mt-4 text-lg text-gray-700">Install√©s au plus pr√®s de chez vous, nous d√©dions notre √©nergie √† am√©liorer votre qualit√© de vie en vous permettant de rester chez vous en toute s√©curit√© et autonomie.</p>
      <p class="mt-4 text-gray-700 text-lg font-semibold">üëã Karine et Gregory √† votre √©coute.</p>
      <ul class="mt-6 space-y-2 text-gray-700">
        <li>‚úÖ Devis gratuit et rapide</li>
        <li>‚úÖ Sp√©cialistes seniors & PMR</li>
        <li>‚úÖ Aides financi√®res possibles : MaPrimeAdapt‚Äô, MDPH, cr√©dit d‚Äôimp√¥t, APA, caisses de retraite‚Ä¶</li>
      </ul>
      <a href="#form" class="inline-block mt-6 bg-[#E2007A] text-white font-semibold px-6 py-3 rounded-xl shadow-lg hover:shadow-xl hover:-translate-y-0.5 transition transform btn-pop">Demander mon devis gratuit</a>
    </div>

    <!-- COLONNE PHOTO (√Ä DROITE) -->
    <div class="flex justify-center items-start">
        <img id="ownerPhoto"
             src="https://drive.google.com/uc?export=view&id=1vQ89blHdlxj2K56PGjF7EV-kHwIawqbq"
             alt="Karine & Gregory ‚Äì DOMETVIE"
             class="rounded-2xl shadow-xl max-w-xs h-auto ring-4 ring-[#E2007A]/10"
             loading="lazy"
             onerror="this.onerror=null;this.src='https://lh3.googleusercontent.com/d/1vQ89blHdlxj2K56PGjF7EV-kHwIawqbq=w800';"/>
    </div>
  </section>

  <!-- FORMULAIRE -->
  <section class="container mx-auto px-4 pb-16">
    <form id="form" class="space-y-4 max-w-xl mx-auto bg-white p-6 rounded-2xl shadow" novalidate> mx-auto px-4 pb-16">
    <form id="form" class="space-y-4 max-w-xl mx-auto bg-white p-6 rounded-2xl shadow" novalidate>
      <div>
        <label class="text-sm font-medium" for="nom_prenom">Nom &amp; Pr√©nom</label>
        <input id="nom_prenom" name="nom_prenom" type="text" class="w-full border px-3 py-2 rounded-xl" required />
      </div>
      <div>
        <label class="text-sm font-medium" for="phone">T√©l√©phone</label>
        <input id="phone" name="phone" type="tel" inputmode="tel" class="w-full border px-3 py-2 rounded-xl" required />
      </div>
      <div>
        <label class="text-sm font-medium" for="email">Email</label>
        <input id="email" name="email" type="email" class="w-full border px-3 py-2 rounded-xl" required />
      </div>
      <div>
        <label class="text-sm font-medium" for="postal_code">Code postal</label>
        <input id="postal_code" name="postal_code" type="text" inputmode="numeric" pattern="[0-9]{5}" class="w-full border px-3 py-2 rounded-xl" required />
      </div>

      <fieldset class="border rounded-xl p-4">
        <legend class="text-sm font-semibold">Quel est votre projet ?</legend>
        <div class="mt-3 grid grid-cols-1 gap-3">
          <label class="flex items-center gap-3"><input type="checkbox" name="interests" value="monte_escalier" class="h-5 w-5"> <span>Monte-escalier</span></label>
          <label class="flex items-center gap-3"><input type="checkbox" name="interests" value="douche_securisee" class="h-5 w-5"> <span>Douche s√©curis√©e</span></label>
          <label class="flex items-center gap-3"><input type="checkbox" name="interests" value="douche_pmr" class="h-5 w-5"> <span>Douche PMR</span></label>
          <label class="flex items-center gap-3"><input type="checkbox" name="interests" value="ascenseur_privatifs" class="h-5 w-5"> <span>Ascenseur privatif</span></label>
          <label class="flex items-center gap-3"><input type="checkbox" name="interests" value="domotique" class="h-5 w-5"> <span>Domotique</span></label>
        </div>
      </fieldset>

      <button type="submit" id="submitBtn" class="w-full bg-[#E2007A] text-white py-3 rounded-xl font-semibold">Envoyer ma demande</button>
      <p id="formMsg" class="text-sm text-gray-600 mt-2"></p>
    </form>
  </section>

  <footer class="bg-gray-900 text-gray-300 py-10">
    <div class="container mx-auto px-4 text-center text-sm">¬© DOMETVIE Lyon Sud Ouest ‚Äî Adaptation de domicile pour seniors & PMR.</div>
  </footer>

  <!-- Script envoi + redirection merci -->
  <script>
    const WEBHOOK_URL = 'https://hook.eu1.make.com/kuh3w1knowsfl2kfacvx5311x8muvylr';
    const form = document.getElementById('form');
    const btn = document.getElementById('submitBtn');
    const msg = document.getElementById('formMsg');

    function getCheckedInterests(){
      return Array.from(document.querySelectorAll('input[name="interests"]:checked')).map(i=>i.value);
    }
    function getUTMs(){
      const p = new URLSearchParams(location.search);
      return {
        utm_source: p.get('utm_source'),
        utm_medium: p.get('utm_medium'),
        utm_campaign: p.get('utm_campaign'),
        utm_content: p.get('utm_content'),
        utm_term: p.get('utm_term')
      };
    }

    form?.addEventListener('submit', async (e)=>{
      e.preventDefault();
      msg.textContent='';
      if(!form.checkValidity()){
        msg.textContent='Merci de v√©rifier les champs requis.';
        return;
      }
      btn.disabled = true; btn.textContent='Envoi en cours‚Ä¶';

      const payload = {
        source: 'landing-dometvie-lyon-sud-ouest',
        nom_prenom: document.getElementById('nom_prenom')?.value || '',
        phone: document.getElementById('phone')?.value || '',
        email: document.getElementById('email')?.value || '',
        postal_code: document.getElementById('postal_code')?.value || '',
        interests: getCheckedInterests(),
        ...getUTMs(),
        ts: new Date().toISOString(),
        page: location.href
      };

      try{
        if(window.fbq){ fbq('track','Lead',{content_name:'Lead DOMETVIE Lyon Sud Ouest'}); }
        const controller = new AbortController();
        const timeout = setTimeout(()=>controller.abort(), 7000);
        try{
          await fetch(WEBHOOK_URL, {method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify(payload), signal: controller.signal});
        }catch(err){ console.warn('Webhook indisponible, on redirige quand m√™me.', err); }
        finally{ clearTimeout(timeout); }
        // Redirection quoi qu'il arrive
        window.location.href = 'merci.html';
        return;
      }catch(err){
        console.error('Erreur soumission formulaire:', err);
        window.location.href = 'merci.html';
        return;
      }finally{
        btn.disabled=false; btn.textContent='Envoyer ma demande';
      }
    });
  </script>
</body>
</html>

